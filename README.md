# Run the project

## Cetici API

### Install DB

```
docker compose up -d

psql -h localhost -p 5467 -U postgres -W db
(pass is postgres)
```

In the postgresql CLI:

```
CREATE EXTENSION "uuid-ossp";
CREATE EXTENSION "postgis";
```

### Run local server

```
(in cetici-api folder)
npm start
```

When adding files you need to regenerate the index.ts files

```
npm run barrels
```

### Update DB

```
npx mikro-orm schema:update -r
```

## Cetici UI

### API Client

The API Client is autogenerated. When the API changes you can run

```
tools/generate-openapi-bindings.sh
```

### Dev server

```
(in cetici-ui folder)
npm run dev
```

# deployment on a server

- You can use postgresql as in local

to copy the server from local

run

```
npm run build
scp -r -i ~/.ssh/mespropresrecherches.pem ./cetici-api/dist ubuntu@13.38.23.28:~/cetici-proto/cetici-api
scp -r -i ~/.ssh/mespropresrecherches.pem ./cetici-api/temp ubuntu@13.38.23.28:~/cetici-proto/cetici-api
```
